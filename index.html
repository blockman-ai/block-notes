<!DOCTYPE html>
<html>
<head>
  <title>BitcoinJS Global Test</title>
</head>
<body style="background:#111;color:#0f0;font-family:monospace;padding:2rem">
  <h2>BitcoinJS v5.2.0 - Test (ESM Loaded)</h2>
  <button onclick="test()">Test BitcoinJS</button>
  <pre id="log">Waiting...</pre>

  <script type="module">
    import * as bitcoin from "https://cdn.jsdelivr.net/npm/bitcoinjs-lib@5.2.0/+esm";
    window.bitcoin = bitcoin;
    window.bitcoinjsReady = Promise.resolve(bitcoin);
  </script>

  <script>
    async function test() {
      const log = document.getElementById("log");
      try {
        const btc = await window.bitcoinjsReady;
        const psbt = new btc.Psbt({ network: btc.networks.bitcoin });
        log.textContent = "✅ Success: PSBT created\n\n" + psbt.toString();
      } catch (e) {
        log.style.color = "red";
        log.textContent = "❌ Error: " + e.message;
      }
    }
  </script>
</body>
</html>
